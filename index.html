<!DOCTYPE html>
<html lang="ko">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>PI-Fuze: Interactive Analysis</title>
Â  Â  <style>
Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --primary-color: #3B82F6; /* A richer, more modern blue */
Â  Â  Â  Â  Â  Â  --secondary-color: #10B981; /* A vibrant green for success/positive elements */
Â  Â  Â  Â  Â  Â  --warning-color: #F59E0B; /* Amber for similarity points */
Â  Â  Â  Â  Â  Â  --bg-color: #F8FAFC; /* A slightly cooler background */
Â  Â  Â  Â  Â  Â  --card-bg: #FFFFFF;
Â  Â  Â  Â  Â  Â  --text-dark: #1F2937;
Â  Â  Â  Â  Â  Â  --text-light: #6B7280;
Â  Â  Â  Â  Â  Â  --border-color: #E5E7EB;
Â  Â  Â  Â  }
Â  Â  Â  Â  html { scroll-behavior: smooth; }
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
Â  Â  Â  Â  Â  Â  background-color: var(--bg-color);
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  -webkit-font-smoothing: antialiased;
Â  Â  Â  Â  Â  Â  -moz-osx-font-smoothing: grayscale;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container { max-width: 800px; margin: 0 auto; }
Â  Â  Â  Â  .header { text-align: center; margin-bottom: 40px; }
Â  Â  Â  Â  .header h1 {
Â  Â  Â  Â  Â  Â  font-size: 2.5em;
Â  Â  Â  Â  Â  Â  font-weight: 800;
Â  Â  Â  Â  Â  Â  color: var(--text-dark);
Â  Â  Â  Â  Â  Â  background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
Â  Â  Â  Â  Â  Â  -webkit-background-clip: text;
Â  Â  Â  Â  Â  Â  -webkit-text-fill-color: transparent;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  }
Â  Â  Â  Â  .header p { font-size: 1.1em; color: var(--text-light); margin-top: 8px; }
Â  Â  Â  Â  .progress-bar { display: flex; justify-content: space-between; margin-bottom: 40px; position: relative; }
Â  Â  Â  Â  .progress-bar::before { content: ''; position: absolute; top: 50%; left: 0; right: 0; height: 4px; background: var(--border-color); z-index: -1; transform: translateY(-50%);}
Â  Â  Â  Â  .step { flex: 1; text-align: center; color: var(--text-light); font-weight: bold; position: relative; }
Â  Â  Â  Â  .step .dot { width: 20px; height: 20px; background-color: var(--border-color); border-radius: 50%; margin: 0 auto 10px; border: 4px solid var(--bg-color); transition: background-color 0.3s ease; }
Â  Â  Â  Â  .step.active .dot { background-color: var(--primary-color); }
Â  Â  Â  Â  .step.active { color: var(--primary-color); }
Â  Â  Â  Â  .card {Â 
Â  Â  Â  Â  Â  Â  background-color: var(--card-bg);Â 
Â  Â  Â  Â  Â  Â  border-radius: 16px;Â 
Â  Â  Â  Â  Â  Â  padding: 35px;Â 
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;Â 
Â  Â  Â  Â  Â  Â  box-shadow: 0 8px 32px rgba(0, 30, 80, 0.08);Â 
Â  Â  Â  Â  Â  Â  border: 1px solid var(--border-color);
Â  Â  Â  Â  Â  Â  transition: opacity 0.5s ease-in-out;
Â  Â  Â  Â  }
Â  Â  Â  Â  .card.finalized {
Â  Â  Â  Â  Â  Â  opacity: 0.7;
Â  Â  Â  Â  Â  Â  background-color: #F9FAFB;
Â  Â  Â  Â  }
Â  Â  Â  Â  .hidden { display: none !important; }

Â  Â  Â  Â  .fade-in {
Â  Â  Â  Â  Â  Â  animation: fadeIn 0.6s ease-in-out;
Â  Â  Â  Â  }
Â  Â  Â  Â  @keyframes fadeIn {
Â  Â  Â  Â  Â  Â  from { opacity: 0; transform: translateY(20px); }
Â  Â  Â  Â  Â  Â  to { opacity: 1; transform: translateY(0); }
Â  Â  Â  Â  }

Â  Â  Â  Â  textarea { width: 100%; min-height: 150px; padding: 15px; border-radius: 8px; border: 1px solid #D1D5DB; font-size: 16px; font-family: inherit; resize: vertical; box-sizing: border-box; transition: border-color 0.2s, box-shadow 0.2s; }
Â  Â  Â  Â  textarea:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); outline: none; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  button { display: block; width: 100%; padding: 15px; background: linear-gradient(45deg, var(--primary-color), #60A5FA); color: white; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-top: 20px; }
Â  Â  Â  Â  button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); }
Â  Â  Â  Â  button:disabled { background: #D1D5DB; cursor: not-allowed; transform: none; box-shadow: none; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .spinner { width: 40px; height: 40px; border: 4px solid rgba(0,0,0,0.1); border-left-color: var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 40px auto; }
Â  Â  Â  Â  @keyframes spin { to { transform: rotate(360deg); } }
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  #gauge-arc {
Â  Â  Â  Â  Â  Â  transition: stroke-dashoffset 1.2s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  /* Analysis Stage Styles */
Â  Â  Â  Â  h3 { font-size: 1.4em; color: var(--text-dark); margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid var(--border-color); }
Â  Â  Â  Â  .analysis-section { margin-bottom: 30px; }
Â  Â  Â  Â  .criteria-list { list-style: none; padding-left: 0; display: flex; flex-wrap: wrap; gap: 10px; }
Â  Â  Â  Â  .criteria-list li { background-color: #EFF6FF; color: var(--primary-color); padding: 8px 15px; border-radius: 20px; font-size: 0.9em; font-weight: 500; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .analysis-grid { display: grid; grid-template-columns: 1fr; gap: 30px; margin-top: 20px; }
Â  Â  Â  Â  .gauge-container { text-align: center; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .comparison-card { background-color: var(--bg-color); padding: 20px; border-radius: 8px; border: 1px solid var(--border-color); }
Â  Â  Â  Â  .comparison-card h4 { margin-top: 0; color: var(--primary-color); font-size: 1.2em;}
Â  Â  Â  Â Â 
Â  Â  Â  Â  .comparison-point { margin-top: 20px; padding: 20px; border-radius: 8px; }
Â  Â  Â  Â  .comparison-point.similar { background-color: #FFFBEB; border-left: 5px solid var(--warning-color); }
Â  Â  Â  Â  .comparison-point.different { background-color: #ECFDF5; border-left: 5px solid var(--secondary-color); }
Â  Â  Â  Â  .comparison-point h4 { display: flex; align-items: center; gap: 10px; margin-top: 0; font-size: 1.1em; }
Â  Â  Â  Â  .comparison-point.similar h4 { color: #D97706; }
Â  Â  Â  Â  .comparison-point.different h4 { color: #059669; }

Â  Â  Â  Â  .nav-button-container { text-align: center; margin-top: 20px; }
Â  Â  Â  Â  #btn-show-questions { width: auto; padding: 12px 30px; display: inline-block; background: var(--secondary-color) }

Â  Â  Â  Â  /* Question Stage Styles */
Â  Â  Â  Â  .question-card { margin-bottom: 20px; background-color: #F9FAFB; padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); }
Â  Â  Â  Â  .question-card label { font-weight: bold; display: block; margin-bottom: 10px; color: var(--text-dark); }
Â  Â  Â  Â  .question-card textarea { min-height: 80px; }

Â  Â  Â  Â  /* Fusion Stage Styles & New Buttons */
Â  Â  Â  Â  .fusion-summary { background-color: #EFF6FF; border-left: 5px solid var(--primary-color); padding: 20px; border-radius: 8px; margin-bottom: 20px;}
Â  Â  Â  Â  .fusion-features ul { list-style-type: none; padding-left: 0; }
Â  Â  Â  Â  .fusion-features li { background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%2310B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>') no-repeat left center; padding-left: 30px; margin-bottom: 15px; line-height: 1.5; }
Â  Â  Â  Â Â 
Â  Â  Â  Â  .action-buttons-container { margin-top: 30px; border-top: 1px solid var(--border-color); padding-top: 20px; }
Â  Â  Â  Â  #btn-copy-result { background: var(--secondary-color); margin-bottom: 20px; }
Â  Â  Â  Â  .feedback-section { text-align: center; }
Â  Â  Â  Â  .feedback-section p { font-weight: bold; color: var(--text-light); margin-bottom: 10px;}
Â  Â  Â  Â  .feedback-buttons { display: flex; justify-content: center; gap: 15px; }
Â  Â  Â  Â  .feedback-btn { width: 80px; padding: 10px; font-size: 24px; background: none; border: 2px solid var(--border-color); border-radius: 50px; transition: background-color 0.2s, transform 0.2s; margin: 0; }
Â  Â  Â  Â  .feedback-btn:hover { background-color: #f0f0f0; transform: scale(1.1); }
Â  Â  Â  Â  .feedback-btn.selected { background-color: var(--secondary-color); border-color: var(--secondary-color); color: white; }

Â  Â  Â  Â  @media (min-width: 768px) {
Â  Â  Â  Â  Â  Â  .analysis-grid { grid-template-columns: 220px 1fr; align-items: flex-start; }
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>

Â  Â  <div class="container">
Â  Â  Â  Â  <div class="header">
Â  Â  Â  Â  Â  Â  <h1>PI-Fuze</h1>
Â  Â  Â  Â  Â  Â  <p>AI-TA ê¸°ë°˜ ì•„ì´ë””ì–´ ì§„ë‹¨ ë° ìœµí•© ì‹œìŠ¤í…œ</p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="progress-bar">
Â  Â  Â  Â  Â  Â  <div class="step active" id="step-1"><div class="dot"></div>ì•„ì´ë””ì–´ ì§„ë‹¨</div>
Â  Â  Â  Â  Â  Â  <div class="step" id="step-2"><div class="dot"></div>ì°½ì˜ì  ë„ë°œ</div>
Â  Â  Â  Â  Â  Â  <div class="step" id="step-3"><div class="dot"></div>ìœµí•© ì•„ì´ë””ì–´</div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="stage-input" class="card">
Â  Â  Â  Â  Â  Â  <h2>ì•„ì´ë””ì–´ ì…ë ¥</h2>
Â  Â  Â  Â  Â  Â  <p>ë¶„ì„í•˜ê³  ì‹¶ì€ ì•„ì´ë””ì–´ë‚˜ ë¦¬í¬íŠ¸ ì´ˆì•ˆì˜ í•µì‹¬ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
Â  Â  Â  Â  Â  Â  <textarea id="idea-input" placeholder="ì—¬ê¸°ì— ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
Â  Â  Â  Â  Â  Â  <button id="btn-start-analysis">ë¶„ì„ ì‹œì‘</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div id="stage-analysis" class="card hidden">
Â  Â  Â  Â  Â  Â  <h2>1. ë…ì°½ì„± ì§„ë‹¨ ë¦¬í¬íŠ¸</h2>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="analysis-section">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>ì¢…í•© í‰ê°€</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="overall-assessment"></p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="analysis-grid">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="gauge-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>êµ¬ì¡°ì  ë…ì°½ì„±</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg width="200" height="120" viewBox="0 0 200 120">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <defs><linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#D0021B"/><stop offset="50%" stop-color="#F8E71C"/><stop offset="100%" stop-color="#50E3C2"/></linearGradient></defs><path d="M 20 100 A 80 80 0 0 1 180 100" stroke="#EAECEF" stroke-width="20" fill="none" /><path d="M 20 100 A 80 80 0 0 1 180 100" stroke="url(#gaugeGradient)" stroke-width="20" fill="none" stroke-dasharray="251.2" stroke-dashoffset="251.2" id="gauge-arc"/><text x="100" y="95" text-anchor="middle" font-size="24" font-weight="bold" fill="#333" id="gauge-text">0%</text>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="criteria-container">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3>íŒë‹¨ ê¸°ì¤€</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul id="criteria-list" class="criteria-list"></ul>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="analysis-section">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>ìœ ì‚¬ ì‚¬ë¡€ ì‹¬ì¸µ ë¶„ì„</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="comparison-card">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>ìœ ì‚¬ì‚¬ë¡€: <span id="comparison-name" style="font-weight:bold;"></span></h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="comparison-desc"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="comparison-point similar">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  êµ¬ì¡°ì  ìœ ì‚¬ì 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="points-similarity"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="comparison-point different">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ì°¨ë³„ì  ë° ë…ì°½ì„±
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="points-difference"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="nav-button-container">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-show-questions">ì§ˆë¬¸ì— ë‹µë³€í•˜ê¸°</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="stage-questions" class="card hidden">
Â  Â  Â  Â  Â  Â  <h2>2. ì°½ì˜ì  ë„ë°œ ì§ˆë¬¸</h2>
Â  Â  Â  Â  Â  Â  <p>AIê°€ ì œì•ˆí•œ ì•„ë˜ ì§ˆë¬¸ë“¤ì— ë‹µë³€í•˜ë©° ì•„ì´ë””ì–´ë¥¼ í™•ì¥ì‹œì¼œ ë³´ì„¸ìš”.</p>
Â  Â  Â  Â  Â  Â  <div id="questions-container"></div>
Â  Â  Â  Â  Â  Â  <button id="btn-submit-answers">ë‹µë³€ ì œì¶œ ë° ìœµí•© ì•„ì´ë””ì–´ ìƒì„±</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  <div id="stage-fusion" class="card hidden">
Â  Â  Â  Â  Â  Â  <h2>3. ìµœì¢… ìœµí•© ì•„ì´ë””ì–´ ì œì•ˆ</h2>
Â  Â  Â  Â  Â  Â  <div class="fusion-summary">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 id="fusion-title" style="color: var(--primary-color);"></h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="fusion-summary-text"></p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <h3>ì—°ê²°ê³ ë¦¬ ë¶„ì„</h3>
Â  Â  Â  Â  Â  Â  <p id="fusion-connection"></p>
Â  Â  Â  Â  Â  Â  <div class="fusion-features">
Â  Â  Â  Â  Â  Â  Â  Â  <h3>ì£¼ìš” íŠ¹ì§•</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <ul id="fusion-features-list"></ul>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="action-buttons-container">
Â  Â  Â  Â  Â  Â  Â  Â  <button id="btn-copy-result">ê²°ê³¼ í…ìŠ¤íŠ¸ë¡œ ë³µì‚¬</button>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="feedback-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p>ì´ ì œì•ˆì´ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”?</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="feedback-buttons">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="feedback-btn" id="btn-feedback-yes">ğŸ‘</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="feedback-btn" id="btn-feedback-no">ğŸ‘</button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="feedback-message" style="color: var(--secondary-color); font-weight: bold; margin-top: 10px;"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <button id="btn-restart">ìƒˆë¡œìš´ ì•„ì´ë””ì–´ ë¶„ì„í•˜ê¸°</button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div id="loading-spinner" class="spinner hidden"></div>
Â  Â  </div>

<script>
// --- State Management ---
let originalIdea = '';
let aiQuestions = [];
let userAnswers = [];
let fusionResultForCopy = '';

// --- DOM Elements ---
const stages = {
Â  Â  input: document.getElementById('stage-input'),
Â  Â  analysis: document.getElementById('stage-analysis'),
Â  Â  questions: document.getElementById('stage-questions'),
Â  Â  fusion: document.getElementById('stage-fusion'),
};
const steps = {
Â  Â  1: document.getElementById('step-1'),
Â  Â  2: document.getElementById('step-2'),
Â  Â  3: document.getElementById('step-3'),
};
const spinner = document.getElementById('loading-spinner');
const ideaInput = document.getElementById('idea-input');
const btnStartAnalysis = document.getElementById('btn-start-analysis');
const btnShowQuestions = document.getElementById('btn-show-questions');
const btnSubmitAnswers = document.getElementById('btn-submit-answers');
const btnRestart = document.getElementById('btn-restart');
const btnCopyResult = document.getElementById('btn-copy-result');
const btnFeedbackYes = document.getElementById('btn-feedback-yes');
const btnFeedbackNo = document.getElementById('btn-feedback-no');
const feedbackMessage = document.getElementById('feedback-message');

// --- Event Listeners ---
btnStartAnalysis.addEventListener('click', handleAnalysisRequest);
btnShowQuestions.addEventListener('click', () => revealStage('questions'));
btnSubmitAnswers.addEventListener('click', handleFusionRequest);
btnRestart.addEventListener('click', () => location.reload());
btnCopyResult.addEventListener('click', handleCopyResult);
btnFeedbackYes.addEventListener('click', () => handleFeedback(true));
btnFeedbackNo.addEventListener('click', () => handleFeedback(false));

// --- UI Control ---
function updateProgressBar(stageName) {
Â  Â  Object.values(steps).forEach(step => step.classList.remove('active'));
Â  Â  if (stageName === 'input' || stageName === 'analysis') {
Â  Â  Â  Â  steps[1].classList.add('active');
Â  Â  } else if (stageName === 'questions') {
Â  Â  Â  Â  steps[1].classList.add('active');
Â  Â  Â  Â  steps[2].classList.add('active');
Â  Â  } else if (stageName === 'fusion') {
Â  Â  Â  Â  [steps[1], steps[2], steps[3]].forEach(s => s.classList.add('active'));
Â  Â  }
}

function revealStage(stageName) {
Â  Â  const stageElement = stages[stageName];
Â  Â  if (stageElement) {
Â  Â  Â  Â  stageElement.classList.remove('hidden');
Â  Â  Â  Â  stageElement.classList.add('fade-in');
Â  Â  Â  Â  // Scroll to the new stage
Â  Â  Â  Â  stageElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
Â  Â  }
Â  Â  updateProgressBar(stageName);
}

function finalizeStage(stageName) {
Â  Â  const stageElement = stages[stageName];
Â  Â  if (stageElement) {
Â  Â  Â  Â  stageElement.classList.add('finalized');
Â  Â  Â  Â  // Disable all buttons and textareas within this stage
Â  Â  Â  Â  const interactiveElements = stageElement.querySelectorAll('button, textarea');
Â  Â  Â  Â  interactiveElements.forEach(el => el.disabled = true);
Â  Â  }
}


// --- API Call Logic ---
// [ìˆ˜ì •] í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì‹¤ì œ fetch ëŒ€ì‹  ê°€ì§œ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜ë¡œ ë³€ê²½
async function callApi(body) {
Â  Â  spinner.classList.remove('hidden');
Â  Â  spinner.scrollIntoView({ behavior: 'smooth', block: 'center' });
Â  Â Â 
Â  Â  // 2ì´ˆê°„ ë¡œë”© ì‹œë®¬ë ˆì´ì…˜
Â  Â  await new Promise(resolve => setTimeout(resolve, 2000));
Â  Â  spinner.classList.add('hidden');

Â  Â  // --- 1ë‹¨ê³„ (ë¶„ì„) ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜ ---
Â  Â  if (body.stage === 'analyze') {
Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  // 40~99 ì‚¬ì´ì˜ ëœë¤ ì ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ì• ë‹ˆë©”ì´ì…˜ í…ŒìŠ¤íŠ¸
Â  Â  Â  Â  Â  Â  originalityScore: Math.floor(Math.random() * 60) + 40, 
Â  Â  Â  Â  Â  Â  overallAssessment: "ì…ë ¥ëœ ì•„ì´ë””ì–´ëŠ” 'ê°œì¸ ë§ì¶¤í˜• AI í•™ìŠµ ê²½ë¡œ ì¶”ì²œ'ì´ë¼ëŠ” í•µì‹¬ ê°œë…ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì´ë¯¸ ì‹œì¥ì— ë‹¤ìˆ˜ ì¡´ì¬í•˜ëŠ” ì ì‘í˜• í•™ìŠµ(Adaptive Learning) ì†”ë£¨ì…˜ê³¼ ìœ ì‚¬ì„±ì´ ë°œê²¬ë©ë‹ˆë‹¤.",
Â  Â  Â  Â  Â  Â  judgmentCriteria: ["AI ë§ì¶¤í™”", "í•™ìŠµ ê²½ë¡œ", "ë°ì´í„° ê¸°ë°˜", "ë™ê¸°ë¶€ì—¬ ì‹œìŠ¤í…œ"],
Â  Â  Â  Â  Â  Â  comparisonAnalysis: {
Â  Â  Â  Â  Â  Â  Â  Â  existingExampleName: "ë“€ì˜¤ë§ê³  (Duolingo)",
Â  Â  Â  Â  Â  Â  Â  Â  existingExampleDesc: "ê²Œì„í™”(Gamification) ìš”ì†Œë¥¼ ë„ì…í•œ ëŒ€í‘œì ì¸ ì–¸ì–´ í•™ìŠµ ì•±ìœ¼ë¡œ, AIë¥¼ í™œìš©í•´ ì‚¬ìš©ì ìˆ˜ì¤€ì— ë§ëŠ” ë¬¸ì œë¥¼ ì œê³µí•©ë‹ˆë‹¤.",
Â  Â  Â  Â  Â  Â  Â  Â  pointsOfSimilarity: "AIë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³ , ê°œì¸í™”ëœ í•™ìŠµ ì½˜í…ì¸ ë¥¼ ì œê³µí•œë‹¤ëŠ” ì ì—ì„œ êµ¬ì¡°ì ìœ¼ë¡œ ìœ ì‚¬í•©ë‹ˆë‹¤. ë˜í•œ, í•™ìŠµ ë™ê¸°ë¥¼ ë¶€ì—¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ê°–ì¶”ê³  ìˆìŠµë‹ˆë‹¤.",
Â  Â  Â  Â  Â  Â  Â  Â  pointsOfDifference: "ì œì•ˆëœ ì•„ì´ë””ì–´ëŠ” 'í•™ìŠµ ê²½ë¡œ' ìì²´ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‹œê°í™”í•˜ëŠ” ë° ë” ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤. ë°˜ë©´ ë“€ì˜¤ë§ê³ ëŠ” ì •í•´ì§„ ìŠ¤í‚¬ íŠ¸ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì œë¥¼ ì¶œì œí•˜ëŠ” ë°©ì‹ì— ê°€ê¹ìŠµë‹ˆë‹¤."
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  questions: [
Â  Â  Â  Â  Â  Â  Â  Â  "ë§Œì•½ ì´ í•™ìŠµ ê²½ë¡œ ì¶”ì²œ ì‹œìŠ¤í…œì„ 'ì–¸ì–´ í•™ìŠµ'ì´ ì•„ë‹Œ, 'ì‹ ì…ì‚¬ì› ì˜¨ë³´ë”© êµìœ¡'ì— ì ìš©í•œë‹¤ë©´ ì–´ë–¤ ëª¨ìŠµì¼ê¹Œìš”?",
Â  Â  Â  Â  Â  Â  Â  Â  "í•™ìŠµìê°€ AIê°€ ì œì•ˆí•œ ê²½ë¡œë¥¼ 'ì˜ë„ì ìœ¼ë¡œ ì´íƒˆ'í•˜ê³  ì‹¶ì„ ë•Œ, ì‹œìŠ¤í…œì€ ì–´ë–»ê²Œ ë°˜ì‘í•´ì•¼ í• ê¹Œìš”?",
Â  Â  Â  Â  Â  Â  Â  Â  "í•™ìŠµ ê²½ë¡œì˜ 'ìµœì¢… ëª©í‘œ'ê°€ ëª…í™•í•˜ì§€ ì•Šì€ ì¶”ìƒì ì¸ ë¶„ì•¼(ì˜ˆ: ì°½ì˜ë ¥ ê°œë°œ)ì—ë„ ì´ ì‹œìŠ¤í…œì„ ì ìš©í•  ìˆ˜ ìˆì„ê¹Œìš”?"
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };
Â  Â  } 
Â  Â  // --- 2ë‹¨ê³„ (ìœµí•©) ìš”ì²­ ì‹œë®¬ë ˆì´ì…˜ ---
Â  Â  else if (body.stage === 'fuse') {
Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  fusionTitle: "T-Fuze: ê¸°ì—…ìš© 'íƒí—˜í˜•' AI ì˜¨ë³´ë”© ë‚´ë¹„ê²Œì´í„°",
Â  Â  Â  Â  Â  Â  fusionSummary: "ê¸°ì¡´ì˜ ì„ í˜•ì ì¸ ì‹ ì…ì‚¬ì› êµìœ¡ì„ íƒˆí”¼, 'ì‹ ì…ì‚¬ì› ì˜¨ë³´ë”©'ì´ë¼ëŠ” ëª…í™•í•œ ëª©í‘œì™€ 'ì˜ë„ì  ê²½ë¡œ ì´íƒˆ'ì´ë¼ëŠ” ììœ¨ì„±ì„ ê²°í•©í•œ AI ê¸°ë°˜ ì ì‘í˜• ì˜¨ë³´ë”© ì‹œìŠ¤í…œì…ë‹ˆë‹¤. AIê°€ ìµœì ì˜ í•™ìŠµ ê²½ë¡œ(ì§ë¬´, ë¬¸í™”)ë¥¼ ì œì•ˆí•˜ë˜, í•™ìŠµìê°€ ìŠ¤ìŠ¤ë¡œ 'íƒí—˜'í•˜ë©° ë°œê²¬í•œ ì§€ì‹ì„ ì‹œìŠ¤í…œì´ ì—­ìœ¼ë¡œ í•™ìŠµí•˜ì—¬ ì „ì²´ ì˜¨ë³´ë”© ë§µì„ ë™ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.",
Â  Â  Â  Â  Â  Â  connection: "ì´ˆê¸° ì•„ì´ë””ì–´ì˜ 'AI í•™ìŠµ ê²½ë¡œ'ì™€ 1ë²ˆ ì§ˆë¬¸('ì‹ ì…ì‚¬ì› ì˜¨ë³´ë”©')ì„ ê²°í•©í•˜ê³ , 2ë²ˆ ì§ˆë¬¸('ê²½ë¡œ ì´íƒˆ')ì„ 'ììœ¨ì  íƒí—˜'ì´ë¼ëŠ” í•µì‹¬ ê¸°ëŠ¥ìœ¼ë¡œ ìˆ˜ìš©í•˜ì—¬ ì•„ì´ë””ì–´ë¥¼ ìœµí•©í–ˆìŠµë‹ˆë‹¤.",
Â  Â  Â  Â  Â  Â  keyFeatures: [
Â  Â  Â  Â  Â  Â  Â  Â  "AI ê¸°ë°˜ ê°œì¸ ë§ì¶¤í˜• ì˜¨ë³´ë”© ê²½ë¡œ ì œì•ˆ (ì§ë¬´ ì—­ëŸ‰, ì‚¬ë‚´ ë¬¸í™”, í•„ìˆ˜ ê·œì •)",
Â  Â  Â  Â  Â  Â  Â  Â  "'íƒí—˜ ëª¨ë“œ' ì œê³µ: ì‹ ì…ì‚¬ì›ì´ ê³µì‹ ê²½ë¡œ ì™¸ì˜ ìë£Œ(ì˜ˆ: ì‚¬ë‚´ ìœ„í‚¤, ë™ë£Œ í”„ë¡œí•„)ë¥¼ íƒìƒ‰í•  ìˆ˜ ìˆëŠ” ììœ¨ì„± ë¶€ì—¬",
Â  Â  Â  Â  Â  Â  Â  Â  "ì§€ì‹ ê·¸ë˜í”„ ì‹œê°í™”: íƒí—˜í•œ ë‚´ìš©ê³¼ ê³µì‹ ê²½ë¡œê°€ ì–´ë–»ê²Œ ì—°ê²°ë˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ë™ì  ë§ˆì¸ë“œë§µ",
Â  Â  Â  Â  Â  Â  Â  Â  "ì—­ë°©í–¥ í”¼ë“œë°± ë£¨í”„: 'íƒí—˜'ì„ í†µí•´ ë°œê²¬ëœ ìœ ìš©í•œ ë¹„ê³µì‹ ì§€ì‹ì„ AIê°€ í•™ìŠµí•˜ì—¬ ê³µì‹ ì˜¨ë³´ë”© ê²½ë¡œì— í¸ì… ì œì•ˆ"
Â  Â  Â  Â  Â  Â  ]
Â  Â  Â  Â  };
Â  Â  }
}
/*
// --- ì›ë³¸ API Call Logic (ì°¸ê³ ìš©ìœ¼ë¡œ ì£¼ì„ ì²˜ë¦¬) ---
async function callApi(body) {
Â  Â  spinner.classList.remove('hidden');
Â  Â  spinner.scrollIntoView({ behavior: 'smooth', block: 'center' });
Â  Â Â 
Â  Â  const controller = new AbortController();
Â  Â  const timeoutId = setTimeout(() => controller.abort(), 25000); // 25 seconds

Â  Â  try {
Â  Â  Â  Â  const response = await fetch('/api/analyze', {
Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  body: JSON.stringify(body),
Â  Â  Â  Â  Â  Â  signal: controller.signal
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  clearTimeout(timeoutId);

Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  const errData = await response.json().catch(() => ({ error: "An unknown server error occurred." }));
Â  Â  Â  Â  Â  Â  throw new Error(errData.error || `ì„œë²„ ì˜¤ë¥˜: ${response.statusText}`);
Â  Â  Â  Â  }
Â  Â  Â  Â  return await response.json();
Â  Â  } catch (error) {
Â  Â  Â  Â  if (error.name === 'AbortError') {
Â  Â  Â  Â  Â  Â  Â alert('ì˜¤ë¥˜: AI ì‘ë‹µ ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”. (Timeout)');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â alert(`ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`);
Â  Â  Â  Â  }
Â  Â  Â  Â  location.reload();
Â  Â  } finally {
Â  Â  Â  Â  spinner.classList.add('hidden');
Â  Â  }
}
*/

// --- Step 1: Analysis ---
async function handleAnalysisRequest() {
Â  Â  originalIdea = ideaInput.value.trim();
Â  Â  if (!originalIdea) {
Â  Â  Â  Â  alert('ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  finalizeStage('input');
Â  Â  const data = await callApi({ stage: 'analyze', idea: originalIdea });
Â  Â  if (data) {
Â  Â  Â  Â  renderAnalysisReport(data);
Â  Â  Â  Â  renderQuestionInputs(data.questions);
Â  Â  Â  Â  revealStage('analysis');
Â  Â  }
}

// [ìˆ˜ì •] ê²Œì´ì§€ ë¡œì§ ë³€ê²½
function renderAnalysisReport(data) {
Â  Â  const { originalityScore, overallAssessment, judgmentCriteria, comparisonAnalysis } = data;
Â  Â Â 
Â  Â  // --- Render Gauge (ìˆ˜ì •ëœ ë¶€ë¶„) ---
Â  Â  const gaugeArc = document.getElementById('gauge-arc'); // ë°”ëŠ˜ ëŒ€ì‹  ê²Œì´ì§€ ë°”(arc)ë¥¼ ì„ íƒ
Â  Â  const gaugeText = document.getElementById('gauge-text');
Â  Â  const maxDashArray = 251.2; // HTML <path>ì— ì •ì˜ëœ stroke-dasharray ê°’
Â  Â Â 
Â  Â  // ì ìˆ˜ì— ë”°ë¥¸ offset ê³„ì‚° (0% = 251.2, 100% = 0)
Â  Â  const offset = maxDashArray * (1 - (originalityScore / 100));
Â  Â Â 
Â  Â  // CSS transitionì´ ì ìš©ë˜ë„ë¡ style ì†ì„± ë³€ê²½
Â  Â  // (setTimeoutì„ ì‚¬ìš©í•˜ì—¬ í™”ë©´ì— ë Œë”ë§ ëœ í›„ ì• ë‹ˆë©”ì´ì…˜ì´ ì‹œì‘ë˜ë„ë¡ í•¨)
Â  Â  setTimeout(() => {
Â  Â  Â  Â  gaugeArc.style.strokeDashoffset = offset;
Â  Â  Â  Â  // í…ìŠ¤íŠ¸ ì• ë‹ˆë©”ì´ì…˜ (CSS transition ì‹œê°„ 1.2sì™€ ë™ì¼í•˜ê²Œ 1200ms)
Â  Â  Â  Â  animateValue(gaugeText, 0, originalityScore, 1200);
Â  Â  }, 100);
Â  Â  // --- ê²Œì´ì§€ ìˆ˜ì • ë ---

Â  Â  // Render Texts
Â  Â  document.getElementById('overall-assessment').textContent = overallAssessment;
Â  Â Â 
Â  Â  // Render Criteria
Â  Â  const criteriaList = document.getElementById('criteria-list');
Â  Â  criteriaList.innerHTML = '';
Â  Â  judgmentCriteria.forEach(item => {
Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  li.textContent = item;
Â  Â  Â  Â  criteriaList.appendChild(li);
Â  Â  });

Â  Â  // Render Comparison
Â  Â  document.getElementById('comparison-name').textContent = comparisonAnalysis.existingExampleName;
Â  Â  document.getElementById('comparison-desc').textContent = comparisonAnalysis.existingExampleDesc;
Â  Â  document.getElementById('points-similarity').textContent = comparisonAnalysis.pointsOfSimilarity;
Â  Â  document.getElementById('points-difference').textContent = comparisonAnalysis.pointsOfDifference;
}


// --- Step 2: Questions ---
function renderQuestionInputs(questions) {
Â  Â  aiQuestions = questions;
Â  Â  const container = document.getElementById('questions-container');
Â  Â  container.innerHTML = '';
Â  Â  questions.forEach((q, index) => {
Â  Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  Â  card.className = 'question-card';
Â  Â  Â  Â  card.innerHTML = `<label for="answer-${index}">ì§ˆë¬¸ ${index + 1}: ${q}</label><textarea id="answer-${index}" placeholder="ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>`;
Â  Â  Â  Â  container.appendChild(card);
Â  Â  });
}

// --- Step 3: Fusion ---
async function handleFusionRequest() {
Â  Â  userAnswers = aiQuestions.map((_, index) => document.getElementById(`answer-${index}`).value.trim());
Â  Â  if (userAnswers.some(answer => answer === '')) {
Â  Â  Â  Â  alert('ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”.');
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  finalizeStage('analysis');
Â  Â  finalizeStage('questions');
Â  Â  const data = await callApi({ stage: 'fuse', originalIdea: originalIdea, answers: userAnswers });
Â  Â  if (data) {
Â  Â  Â  Â  renderFusionReport(data);
Â  Â  Â  Â  revealStage('fusion');
Â  Â  }
}

function renderFusionReport(data) {
Â  Â  const { fusionTitle, fusionSummary, connection, keyFeatures } = data;
Â  Â  document.getElementById('fusion-title').textContent = fusionTitle;
Â  Â  document.getElementById('fusion-summary-text').textContent = fusionSummary;
Â  Â  document.getElementById('fusion-connection').textContent = connection;
Â  Â Â 
Â  Â  const list = document.getElementById('fusion-features-list');
Â  Â  list.innerHTML = '';
Â  Â  keyFeatures.forEach(feature => {
Â  Â  Â  Â  const li = document.createElement('li');
Â  Â  Â  Â  li.textContent = feature;
Â  Â  Â  Â  list.appendChild(li);
Â  Â  });

Â  Â  // Prepare text for copying
Â  Â  fusionResultForCopy = `## ìœµí•© ì•„ì´ë””ì–´: ${fusionTitle}\n\n**ìš”ì•½:**\n${fusionSummary}\n\n**ì—°ê²°ê³ ë¦¬ ë¶„ì„:**\n${connection}\n\n**ì£¼ìš” íŠ¹ì§•:**\n${keyFeatures.map(f => `- ${f}`).join('\n')}`;
}

// --- Utility Functions ---

// [ìˆ˜ì •] ìˆ«ì ì¹´ìš´íŠ¸ì—… ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜ ì¶”ê°€
function animateValue(obj, start, end, duration) {
Â  Â  let startTimestamp = null;
Â  Â  const step = (timestamp) => {
Â  Â  Â  Â  if (!startTimestamp) startTimestamp = timestamp;
Â  Â  Â  Â  const progress = Math.min((timestamp - startTimestamp) / duration, 1);
Â  Â  Â  Â  const value = Math.floor(progress * (end - start) + start);
Â  Â  Â  Â  obj.textContent = `${value}%`;
Â  Â  Â  Â  if (progress < 1) {
Â  Â  Â  Â  Â  Â  window.requestAnimationFrame(step);
Â  Â  Â  Â  }
Â  Â  };
Â  Â  window.requestAnimationFrame(step);
}

function handleCopyResult() {
Â  Â  navigator.clipboard.writeText(fusionResultForCopy).then(() => {
Â  Â  Â  Â  const originalText = btnCopyResult.textContent;
Â  Â  Â  Â  btnCopyResult.textContent = 'ë³µì‚¬ ì™„ë£Œ!';
Â  Â  Â  Â  btnCopyResult.disabled = true;
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  btnCopyResult.textContent = originalText;
Â  Â  Â  Â  Â  Â  btnCopyResult.disabled = false;
Â  Â  Â  Â  }, 2000);
Â  Â  }).catch(err => {
Â  Â  Â  Â  console.error('Copy failed', err);
Â  Â  Â  Â  alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
Â  Â  });
}

function handleFeedback(isHelpful) {
Â  Â  feedbackMessage.textContent = 'í”¼ë“œë°±ì„ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!';
Â  Â  btnFeedbackYes.disabled = true;
Â  Â  btnFeedbackNo.disabled = true;
Â  Â  btnFeedbackYes.classList.remove('selected');
Â  Â  btnFeedbackNo.classList.remove('selected');
Â  Â  if (isHelpful) {
Â  Â  Â  Â  btnFeedbackYes.classList.add('selected');
Â  Â  } else {
Â  Â  Â  Â  btnFeedbackNo.classList.add('selected');
Â  Â  }
}

// --- Initial Load ---
updateProgressBar('input');

</script>
</body>
</html>
